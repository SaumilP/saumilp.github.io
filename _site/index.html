<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Saumil Patel &middot; coding.isFun()
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/all.min.css">
  <!--
  <link rel="stylesheet" href="/assets/css/poole.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/lanyon.css">
  <link rel="stylesheet" href="/assets/css/custom.css">
  -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <link rel="canonical" href="/index.html" />

  <script async src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/bower_components/jquery/dist/jquery.min.js"><\/script>')</script>

</head>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59409595-1', 'auto');
  ga('send', 'pageview');

</script>


  <body class="theme-base-08">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <br>
  <div class="smallerCircularProfilePic"></div>

  <div class="sidebar-item" style="text-align:center">
    <p>Code, Thoughts and Ideas</p>
  </div>

  <nav class="sidebar-nav" style="text-align:center">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
    
      
        
          <a class="sidebar-nav-item" href="/about.html">About Me</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive.html">Archive</a>
        
      
    
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/index.html">About</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/tags.html">Tags</a>
        
      
    
      
        
      
    
      
        
      
    

<!--     <a class="sidebar-nav-item" href="https://github.com/SaumilP/archive/v.zip">Download</a> -->
    <!--<a class="sidebar-nav-item" href="https://github.com/SaumilP">GitHub project</a>-->
    <a class="sidebar-nav-item" target="_blank" href="">Feedback</a>
  </nav>

  <div class="sidebar-item" style="text-align:center">
    <p>
      <span id="ga-totalpageviews"></span>
    </p>

    <p>
      &copy; 2015. Saumil Patel.
    </p>
      All rights reserved.
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container" style="text-align:center">
          <h3 class="masthead-title">
            <a href="/" title="Home">codeground</a>
            <small>coding.isFun()</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  

  <ul class="tags">
    
      <li><a href="/tags.html#configuration" class="tag">configuration</a></li>
    
      <li><a href="/tags.html#setup" class="tag">setup</a></li>
    
  </ul>

  <div class="post">
    <h1 class="post-title">
      <a href="/posts/unique-id-generation-in-solr/">
        Automatic ID generation in Apache Solr
      </a>
    </h1>

    <div>
      <span class="post-date" style="float: left;">16 Feb 2015</span>
      <span class="post-date" data-post-url="/posts/unique-id-generation-in-solr/" style="float: right;"></span>
    </div>
    <div style="clear: both;"></div>​

    <p>I have been working on Apache Solr for last few months, and have been recieving requirements to speed up query process. As part of the investigation, i found out as retrieved documents’ unique id generation contributes query processing.And hence i have decided to add this post. </p>

<h4 id="data-structure">Data Structure</h4>

<p>Our sample data structure (field section from <strong>schema.xml</strong>) looks like specified below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;fields&gt;</span>
	<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span> <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="na">required=</span><span class="s">&quot;true&quot;</span> <span class="na">multiValued=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">type=</span><span class="s">&quot;text_general&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span> <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;field</span> <span class="na">name=</span><span class="s">&quot;_version_&quot;</span> <span class="na">type=</span><span class="s">&quot;long&quot;</span> <span class="na">indexed=</span><span class="s">&quot;true&quot;</span> <span class="na">stored=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/fields&gt;</span></code></pre></div>

<p>In addition to this, I’ve added the information about which field is the one that should contain unique identifiers.
This was also done in <i>schema.xml</i> file:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;uniqueKey&gt;</span>id<span class="nt">&lt;/uniqueKey&gt;</span></code></pre></div>

<h4 id="solr-configuration">Solr Configuration</h4>
<p>In addition to changes in the <i>schema.xml</i> file, i need to modify the <i>solrconfig.xml</i> file and introduce a proper <i>UpdateRequestProcessorChain</i> like specified below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;updateRequestProcessorChain&gt;</span>
	<span class="nt">&lt;processor</span> <span class="na">class=</span><span class="s">&quot;solr.UUIDUpdateProcessorFactory&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;fieldName&quot;</span><span class="nt">&gt;</span>id<span class="nt">&lt;/str&gt;</span>
	<span class="nt">&lt;/processor&gt;</span>
	<span class="nt">&lt;processor</span> <span class="na">class=</span><span class="s">&quot;solr.LogUpdateProcessoryFactory&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;processor</span> <span class="na">class=</span><span class="s">&quot;solr.RunUpdateProcessorFactory&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/updateRequestProcessorChain&gt;</span></code></pre></div>

<p>Above informs Solr that <i>id</i> field contents are to be generated automatically.</p>

<h4 id="simple-test">Simple Test</h4>
<p>Enough with the configuration, time to test the configuration. Run below command from terminal to update document before querying indexed documents.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">curl -XPOST &#39;localhost:8993/solr/update?commit=true&#39; --data-binary &#39;<span class="nt">&lt;add&gt;&lt;doc&gt;&lt;field</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/field&gt;&lt;/doc&gt;&lt;/add&gt;</span>&#39; -H &#39;Content-type:application/xml&#39;</code></pre></div>

<p>If above command runs successfully without any errors, document will get indexed. After then, in order to query below command can be used:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">curl -XGET &#39;localhost:8993/solr/select?q=*:*<span class="err">&amp;</span>indent=true&#39;</code></pre></div>

<p>Above will return queried documents specified below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;response&gt;</span>
 <span class="nt">&lt;lst</span> <span class="na">name=</span><span class="s">&quot;responseHeader&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;int</span> <span class="na">name=</span><span class="s">&quot;status&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/int&gt;</span>
  <span class="nt">&lt;int</span> <span class="na">name=</span><span class="s">&quot;QTime&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/int&gt;</span>
  <span class="nt">&lt;lst</span> <span class="na">name=</span><span class="s">&quot;params&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;indent&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="nt">&gt;</span>*:*<span class="nt">&lt;/str&gt;</span>
  <span class="nt">&lt;/lst&gt;</span>
 <span class="nt">&lt;/lst&gt;</span>
 <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&quot;response&quot;</span> <span class="na">numFound=</span><span class="s">&quot;1&quot;</span> <span class="na">start=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;doc&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>1cdee8b4-c42d-4101-8301-4dc350a4d522<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;long</span> <span class="na">name=</span><span class="s">&quot;_version_&quot;</span><span class="nt">&gt;</span>1439726523307261952<span class="nt">&lt;/long&gt;</span>
  <span class="nt">&lt;/doc&gt;</span>
 <span class="nt">&lt;/result&gt;</span>
<span class="nt">&lt;/response&gt;</span></code></pre></div>

<p>If you analyze response, you can see the unique identifier was automatically generated. Now if you run same commands ( addition of document &amp; query ) then result would looks like this:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;response&gt;</span>
 <span class="nt">&lt;lst</span> <span class="na">name=</span><span class="s">&quot;responseHeader&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;int</span> <span class="na">name=</span><span class="s">&quot;status&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/int&gt;</span>
  <span class="nt">&lt;int</span> <span class="na">name=</span><span class="s">&quot;QTime&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/int&gt;</span>
  <span class="nt">&lt;lst</span> <span class="na">name=</span><span class="s">&quot;params&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;indent&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;q&quot;</span><span class="nt">&gt;</span>*:*<span class="nt">&lt;/str&gt;</span>
  <span class="nt">&lt;/lst&gt;</span>
 <span class="nt">&lt;/lst&gt;</span>
 <span class="nt">&lt;result</span> <span class="na">name=</span><span class="s">&quot;response&quot;</span> <span class="na">numFound=</span><span class="s">&quot;2&quot;</span> <span class="na">start=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;doc&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>1cdee8b4-c42d-4101-8301-4dc350a4d522<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;long</span> <span class="na">name=</span><span class="s">&quot;_version_&quot;</span><span class="nt">&gt;</span>1439726523307261952<span class="nt">&lt;/long&gt;</span>
  <span class="nt">&lt;/doc&gt;</span>
  <span class="nt">&lt;doc&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>Test<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;str</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>9bedcb5f-1b71-4ab7-80a9-9882a6bf319e<span class="nt">&lt;/str&gt;</span>
   <span class="nt">&lt;long</span> <span class="na">name=</span><span class="s">&quot;_version_&quot;</span><span class="nt">&gt;</span>1439726693819351040<span class="nt">&lt;/long&gt;</span>
  <span class="nt">&lt;/doc&gt;</span>
 <span class="nt">&lt;/result&gt;</span>
<span class="nt">&lt;/response&gt;</span></code></pre></div>

<p>As you can see both documents show two different unique identifier generated by solr.</p>



    <br>

    <a href="/posts/unique-id-generation-in-solr/">
        Continue reading...
    </a>
  </div>
  

  <ul class="tags">
    
      <li><a href="/tags.html#design-patterns" class="tag">design-patterns</a></li>
    
      <li><a href="/tags.html#architecture" class="tag">architecture</a></li>
    
  </ul>

  <div class="post">
    <h1 class="post-title">
      <a href="/posts/xml-schema-design-patterns/">
        XML Schema Design Patterns
      </a>
    </h1>

    <div>
      <span class="post-date" style="float: left;">09 Feb 2015</span>
      <span class="post-date" data-post-url="/posts/xml-schema-design-patterns/" style="float: right;"></span>
    </div>
    <div style="clear: both;"></div>​

    <p>This might be one of the old topic - specially when lot of developers are working with RESTful Services, but i would like to point out couple of pros and cons. </p>

<p>As most of the developers know, XML schema is very powerful, but they lack object-orientation, and are intended to capture a data model rather than an object model. In last one and half decades, there has been few tools available to architects and developers to be able to make use off some of the object orientation principles - like polymorphism for flexibility. But ultimately the whole point of the services must be general enough that it can communicate across languages. Hence i have attempted to put together some information around some of the very well known Design patterns.</p>

<p>Some of the XML Schema design patterns include Russian Doll, Venetian Blind &amp; Salami Slice.</p>

<h3 id="russian-doll">Russian Doll</h3>
<hr />
<p>Let us have a look at Russian Doll Design pattern. As name indicates - this design pattern permits single global root element which contains constituent types. All element declarations are nested inside the root element, and can therefore only be used once in within the context.</p>

<p>Some of the characteristics of this pattern are:</p>

<ul>
  <li>It has a single global root Element</li>
  <li>All the types are local</li>
  <li>It supports only schemas designed in a single file</li>
  <li>Exposed schema is fully encapsulated</li>
  <li>It has high cohesion with minimal coupling</li>
  <li>Easy to read and write</li>
</ul>

<p>One of the ceavet while considering this patter, do not use this pattern when you would want to reuse types.
Enough with the theory, let’s have a look at the example.</p>

<p><img src="http://saumilp.github.io/assets/images/russian_doll.png" alt="Russian Doll XSD" /></p>

<p>Equivalent Xml Schema Document can be found below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="cp">&lt;?xml-stylesheet href=&quot;../2008/09/xsd.xsl&quot; type=&quot;text/xsl&quot;?&gt;</span>
<span class="nt">&lt;xs:schema</span> <span class="na">targetNamespace=</span><span class="s">&quot;http://www.w3.org/XML/1998/namespace&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;xs:annotation&gt;</span>
		<span class="nt">&lt;xs:documentation&gt;</span>Schema using Russian Doll Pattern<span class="nt">&lt;/xs:documentation&gt;</span>
	<span class="nt">&lt;/xs:annotation&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Production&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:complexType&gt;</span>
			<span class="nt">&lt;xs:sequence&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Type&quot;</span><span class="nt">&gt;</span>
					<span class="nt">&lt;xs:simpleType&gt;</span>
						<span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;TheatrePlay&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;Movie&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;MusicAlbum&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:restriction&gt;</span>
					<span class="nt">&lt;/xs:simpleType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Producers&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">&gt;</span>
					<span class="nt">&lt;xs:complexType&gt;</span>
						<span class="nt">&lt;xs:sequence&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ExecutiveProducer&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:sequence&gt;</span>
					<span class="nt">&lt;/xs:complexType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Writers&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">&gt;</span>
					<span class="nt">&lt;xs:complexType&gt;</span>
						<span class="nt">&lt;xs:sequence&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Scene&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:sequence&gt;</span>
					<span class="nt">&lt;/xs:complexType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Nominations&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
					<span class="nt">&lt;xs:complexType&gt;</span>
						<span class="nt">&lt;xs:sequence&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Category&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Year&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:int&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Actor&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
								<span class="nt">&lt;xs:complexType&gt;</span>
									<span class="nt">&lt;xs:sequence&gt;</span>
										<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
										<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Role&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
									<span class="nt">&lt;/xs:sequence&gt;</span>
								<span class="nt">&lt;/xs:complexType&gt;</span>
							<span class="nt">&lt;/xs:element&gt;</span>
						<span class="nt">&lt;/xs:sequence&gt;</span>
					<span class="nt">&lt;/xs:complexType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Cast&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
					<span class="nt">&lt;xs:complexType&gt;</span>
						<span class="nt">&lt;xs:sequence&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ActorName&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingRole&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingName&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:sequence&gt;</span>
					<span class="nt">&lt;/xs:complexType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
			<span class="nt">&lt;/xs:sequence&gt;</span>
		<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;/xs:element&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span></code></pre></div>

<p>As you can see, above schema defines a single global element <string>Production</string> and it is easy to read and write because there is no mixing. The types required to create a production element are all the nested within it. Elements and types cannot be referenced, and Namespaces are localized. And because it is self-contained, changing types will not affect other schemas.</p>

<p>One of the biggest disadvantages of this pattern with respect to straight XML is that the types you carefully defined cannot be reused elsewhere, hence causing very large schema. </p>

<p>This design pattern is perhaps an appropriate design to use when wrapping legacy data from a source that is fairly static.</p>

<h3 id="salami-slice">Salami Slice</h3>
<hr />
<p>This pattern represents opposite end of the design spectrum from Russian Doll.</p>

<p>By using this pattern, use can declare all the elements as global, but declare all types locally. Pattern is named as Salami Slice because of the ability to set all the elements in global namespace and to make them reusable - which acts as a single definition <strong>slice</strong>. These slices can be used to combined with others for better reusablility.</p>

<p>With this pattern, schema can have more components, all defined individually - which are then brought together into global elements. This pattern is entirely open, allowing a wide variety of possible combinations compared to its counter part pattern Russian Doll - which is absolutely rigid and inflexible. Physical structure of the Russian Doll allows only one way to put the constituents toghether, while slices offer no guidance for how they might be arranged in schema.</p>

<p>Some of the characteristics of this pattern are:</p>

<ul>
  <li>All elements are global</li>
  <li>All elements are defined within global namespace</li>
  <li>All types are local</li>
  <li>Element declarations are never nested</li>
  <li>Element declarations are reusable.</li>
  <li>It is difficult to determine intended root element, as there can be many potential choices.</li>
</ul>

<p>Example from Russian Doll has been redesigned and represented differently with salami slice:
<img src="http://saumilp.github.io/assets/images/salami_slice_2015_02_09.png" alt="Salami Slice XSD" /></p>

<p>Equivalent Xml Schema Document can be found below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="cp">&lt;?xml-stylesheet href=&quot;../2008/09/xsd.xsl&quot; type=&quot;text/xsl&quot;?&gt;</span>
<span class="nt">&lt;xs:schema</span> <span class="na">targetNamespace=</span><span class="s">&quot;http://www.w3.org/XML/1998/namespace&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class="na">xmlns:tns=</span><span class="s">&quot;http://design.pattern.org/salami&quot;</span> <span class="na">elementFormDefault=</span><span class="s">&quot;qualified&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;xs:annotation&gt;</span>
		<span class="nt">&lt;xs:documentation&gt;</span>Schema using Salami Slice Design Pattern<span class="nt">&lt;/xs:documentation&gt;</span>
	<span class="nt">&lt;/xs:annotation&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;ProducerType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ExecutiveProducer&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;CastType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ActorName&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingRole&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingName&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;NominationType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Category&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Year&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:int&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Actor&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
				<span class="nt">&lt;xs:complexType&gt;</span>
					<span class="nt">&lt;xs:sequence&gt;</span>
						<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Role&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;/xs:sequence&gt;</span>
				<span class="nt">&lt;/xs:complexType&gt;</span>
			<span class="nt">&lt;/xs:element&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;WriterType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Scene&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Producers&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:ProducerType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Writers&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:WriterType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Nominations&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:NominationType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Performer&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:CastType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Director&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Production&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:complexType&gt;</span>
			<span class="nt">&lt;xs:sequence&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Name&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Type&quot;</span><span class="nt">&gt;</span>
					<span class="nt">&lt;xs:simpleType&gt;</span>
						<span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;TheatrePlay&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;Movie&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;MusicAlbum&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:restriction&gt;</span>
					<span class="nt">&lt;/xs:simpleType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Producers&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Writers&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Nominations&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Director&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Performer&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;/xs:sequence&gt;</span>
		<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;/xs:element&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span></code></pre></div>

<p>The main advantage of this pattern is that becuase the elements are declared globally, schema is reusable. But because changing an element affects the composing elements, this pattern is considered tightly coupled.</p>

<p>This schema design pattern are verbose and are clearly arranged and flat.</p>

<h3 id="venetian-blind">Venetian Blind</h3>
<hr />
<p>This pattern is an extension of Russian Doll Pattern. It contains only one signle global root element. It departs from Russian Doll in that it allows for reuse of all the types as well asd the global root element.</p>

<p>Use of this pattern means that schema designer wants to define a single global root element for instanciantion and compose it with externally defined types. This has the benefit of miximiizing reuse.</p>

<p>Some of the characteristics of this pattern are:</p>

<ul>
  <li>It has a single global root element</li>
  <li>It mixes global and local declarations</li>
  <li>It has high cohesion but also high coupling</li>
  <li>It maximizes reuse of all the types.</li>
  <li>Encapsulation is limited due to types being exposed.</li>
  <li>It allows designers to use multiple files to define schema</li>
  <li>It is verbose. Breaking apart each type in a way provides very selective, granular control over each individual aspect on the element, but makes for a lot of typing.</li>
</ul>

<p>Original Example from Russian Doll has been redesigned and represented differently with salami slice:
<img src="http://saumilp.github.io/assets/images/venetian_blind_2015_02_09.png" alt="Venetian Blind XSD" /></p>

<p>Equivalent Xml Schema Document can be found below:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="cp">&lt;?xml-stylesheet href=&quot;../2008/09/xsd.xsl&quot; type=&quot;text/xsl&quot;?&gt;</span>
<span class="nt">&lt;xs:schema</span> <span class="na">targetNamespace=</span><span class="s">&quot;http://www.w3.org/XML/1998/namespace&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class="na">xmlns:tns=</span><span class="s">&quot;http://design.pattern.org/salami&quot;</span> <span class="na">elementFormDefault=</span><span class="s">&quot;qualified&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;xs:annotation&gt;</span>
		<span class="nt">&lt;xs:documentation&gt;</span>Schema using Salami Slice Design Pattern<span class="nt">&lt;/xs:documentation&gt;</span>
	<span class="nt">&lt;/xs:annotation&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;CommonName&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:group</span> <span class="na">name=</span><span class="s">&quot;ContributionGroup&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:CommonName&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Contribution&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:group&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;ProducerType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:group</span> <span class="na">ref=</span><span class="s">&quot;xml:ContributionGroup&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;CastType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;ActorName&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:CommonName&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingRole&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;CastingName&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;NominationType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Category&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Year&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:int&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;xs:group</span> <span class="na">ref=</span><span class="s">&quot;xml:ContributionGroup&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>			
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:complexType</span> <span class="na">name=</span><span class="s">&quot;WriterType&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:sequence&gt;</span>
			<span class="nt">&lt;xs:group</span> <span class="na">ref=</span><span class="s">&quot;xml:ContributionGroup&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/xs:sequence&gt;</span>
	<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Name&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Producers&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:ProducerType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Writers&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:WriterType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Nominations&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:NominationType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Performer&quot;</span> <span class="na">type=</span><span class="s">&quot;xml:CastType&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Director&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Production&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;xs:complexType&gt;</span>
			<span class="nt">&lt;xs:sequence&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Name&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;Type&quot;</span> <span class="nt">&gt;</span>
					<span class="nt">&lt;xs:simpleType&gt;</span>
						<span class="nt">&lt;xs:restriction</span> <span class="na">base=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;TheatrePlay&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;Movie&quot;</span> <span class="nt">/&gt;</span>
							<span class="nt">&lt;xs:enumeration</span> <span class="na">value=</span><span class="s">&quot;MusicAlbum&quot;</span> <span class="nt">/&gt;</span>
						<span class="nt">&lt;/xs:restriction&gt;</span>
					<span class="nt">&lt;/xs:simpleType&gt;</span>
				<span class="nt">&lt;/xs:element&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Producers&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Writers&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Nominations&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Director&quot;</span> <span class="nt">/&gt;</span>
				<span class="nt">&lt;xs:element</span> <span class="na">ref=</span><span class="s">&quot;xml:Performer&quot;</span> <span class="nt">/&gt;</span>
			<span class="nt">&lt;/xs:sequence&gt;</span>
		<span class="nt">&lt;/xs:complexType&gt;</span>
	<span class="nt">&lt;/xs:element&gt;</span>
<span class="nt">&lt;/xs:schema&gt;</span></code></pre></div>

<p>Because this pattern has more flexibiliy, it is de-facto design pattern during XML Design pattern. There are several other patterns - like Garden of Eden and Chameleon - make uses of these basic patterns to solve other issues. I will try and attend rest of the patterns in next part.</p>



    <br>

    <a href="/posts/xml-schema-design-patterns/">
        Continue reading...
    </a>
  </div>
  

  <ul class="tags">
    
      <li><a href="/tags.html#currying-functions" class="tag">currying-functions</a></li>
    
      <li><a href="/tags.html#functions" class="tag">functions</a></li>
    
  </ul>

  <div class="post">
    <h1 class="post-title">
      <a href="/posts/xml-indexing-in-solr/">
        XML Document Indexing in Solr
      </a>
    </h1>

    <div>
      <span class="post-date" style="float: left;">31 Jan 2015</span>
      <span class="post-date" data-post-url="/posts/xml-indexing-in-solr/" style="float: right;"></span>
    </div>
    <div style="clear: both;"></div>​

    


    <br>

    <a href="/posts/xml-indexing-in-solr/">
        Continue reading...
    </a>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>


        


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>

    <script>
    var jqxhr = $.ajax("")
          .done(function(response) {
              if (response !== undefined) {
                var page_url = "/index.html";
                var page_views = undefined;
                var total_views = undefined;
                var oPageViews = {};

                var total_views = response.totalsForAllResults['ga:pageviews'];

                var pagePathIndex;
                var pageViewsIndex;

                function findColumnHeaders(element, index, array) {
                  switch (element.name) {
                    case "ga:pagePath":
                      pagePathIndex = index;
                      return;
                    case "ga:pageviews":
                      pageViewsIndex = index;
                      return;
                  }
                }

                response.columnHeaders.forEach(findColumnHeaders);

                if (total_views !== undefined && total_views !== null &&  $("#ga-totalpageviews-div")) {
                    $("#ga-totalpageviews").html("Views: " + total_views);
                }

                if (response.rows !== undefined) {
                  jQuery.each(response.rows, function(index, row){
                      var ga_page_url = row[pagePathIndex];
                      if (page_url.lastIndexOf("/") === (page_url.length - 1)) {
                        page_url = page_url + "index.html";
                      }
                      if (ga_page_url === page_url) {
                          page_views = row[pageViewsIndex];
                          if (page_views !== undefined && page_views !== null && $("#ga-pageviews-div")) {
                              $("#ga-pageviews").html("Views: " + page_views);
                          }
                      }

                      oPageViews[ga_page_url] = row[pageViewsIndex];

                  });

                  $('span[data-post-url]').each(function(index) {
                    var dataPostUrl = $(this).attr("data-post-url");
                    if (dataPostUrl.lastIndexOf("/") === (dataPostUrl.length - 1)) {
                      dataPostUrl = dataPostUrl + "index.html";
                    }

                    if (oPageViews[dataPostUrl] !== undefined && oPageViews[dataPostUrl] !== null ) {
                      $(this).html("Views: " + oPageViews[dataPostUrl]);
                    }

                  });
                }
              }
          })
          .fail(function(error) {
              console.log( "Failed to get GA data" );
          });
</script>


  </body>
</html>
